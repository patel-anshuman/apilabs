<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="./images/apilabs.png" type="image/x-icon" />
    <title>Login</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="icon" href="" type="image/x-icon">
    <link rel="stylesheet" href="./styles/login.css" />
  </head>
  <body>
    <div class="login_form_container">
      <div class="login_form">
        <h2>Login</h2>
        <div class="input_group">
          <i class="fa fa-user"></i>
          <input
            type="text"
            placeholder="Username"
            class="input_text"
            autocomplete="off"
            id="username"
          />
        </div>
        <div class="input_group">
          <i class="fa fa-unlock-alt"></i>
          <input
            type="password"
            placeholder="Password"
            class="input_text"
            autocomplete="off"
            id="pass"
          />
        </div>




         
        <div class="button_group" id="login_button">
          <a>Submit</a>
        </div>
        
        <div id="or">
          <h3>OR</h3>
          
        
        <a href="./register.html" style="text-align: center;" id="registration">Register Here</a>
      </div>
    </div>
    <script src="./src/api.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
      <script>
        let id = document.getElementById("username");
        let pass = document.getElementById("pass");
        let loginBtn = document.getElementById("login_button");
        
        loginBtn.addEventListener("click", () => {
          // Create a new object to hold the data to be sent in the request body
          const payload = {
            email: id.value,
            password: pass.value
          };
        
          // Send a POST request to the server with the payload data in the request body
          fetch(`${baseurl}/user/login`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
          })
          .then(response => 
            // Handle the response from the server
            response.json()
          ).then((data)=>{
            console.log('Response:', data);
            alert(`${data.msg}`)
            location.href="./home.html"
          })
          .catch(error => {
            // Handle any errors that occur during the request
            console.error('Error:', error);
          });
        });
        
      </script>

  



  </body>
</html>